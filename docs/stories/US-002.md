---
id: US-002
epic: OBP
title: Fazer login com autenticação segura
priority: P0
risk_level: High
status: Draft
dependencies: [US-001]
---

## Contexto
Desenvolver login via `POST /login` com gestão de sessões e tokens JWT. Integra com entitlements para controle de acesso às views.

## Critérios de Aceitação (AC)
1. Login com credenciais válidas retorna token válido.
2. Credenciais inválidas retornam erro genérico.
3. Lockout após N tentativas inválidas.
4. Tokens expiram após TTL definido.

## Tarefas (Dev)
- Implementar endpoint `POST /login`.
- JWT com expiração e refresh.
- Lockout progressivo após falhas.
- Logout com revogação de tokens.

## Tarefas (QA)
- Unit: verificação de senha e geração de tokens.
- Integration: lockout e refresh.
- E2E: login, dashboard, logout.

## Riscos
- Falha no lockout permite brute force.
- Tokens sem expiração segura.
- Mensagens de erro revelando usuários.
